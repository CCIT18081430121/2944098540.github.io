<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>服务特性</title>
    <url>/2020/06/19/%E6%9C%8D%E5%8A%A1%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<pre><code>**服务特性**</code></pre><h2 id="一-发现led服务"><a href="#一-发现led服务" class="headerlink" title="一.发现led服务"></a>一.发现led服务</h2><p>这次我们来发现服务中有LED服务，接下来直接编写电脑端的代码</p>
<p>在上一节我们在浏览器里通过蓝牙找到了自己的板子，找到板子之后我们要了解他有什么服务这里我们的客服给出了<a href="https://lancaster-university.github.io/microbit-docs/resources/bluetooth/bluetooth_profile.html" target="_blank" rel="noopener">服务信息网站</a>，大家可以去看看。我们通过js函数获取它的服务，控制他的特性。led显示特性主要通过数组控制，因为他是一个5x5的矩阵，我们用一个5x5的数组控制它显示，即如果要亮第一行的2，3，arry[0]=b:00110;换成十进制就是12；</p>
<h2 id="二-编写电脑端代码"><a href="#二-编写电脑端代码" class="headerlink" title="二.编写电脑端代码"></a>二.编写电脑端代码</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> has_accelerometer_service = <span class="literal">false</span>; </span><br><span class="line"><span class="keyword">var</span> has_accelerometer_data = <span class="literal">false</span>; </span><br><span class="line"><span class="keyword">var</span> has_led_service = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> has_led_matrix_state = <span class="literal">false</span>; </span><br><span class="line"><span class="keyword">var</span> has_led_text=<span class="literal">false</span>     <span class="comment">//新加的led_text特性相关语句</span></span><br><span class="line"><span class="keyword">var</span> has_device_information_service = <span class="literal">false</span>; </span><br><span class="line"><span class="keyword">var</span> has_model_name_string = <span class="literal">false</span>;</span><br><span class="line">ACCELEROMETER_SERVICE = <span class="string">'e95d0753-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line"> LED_SERVICE = <span class="string">'e95dd91d-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line"> DEVICE_INFORMATION_SERVICE = <span class="string">'0000180a-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line"><span class="comment">// characteristic UUIDs </span></span><br><span class="line"> ACCELEROMETER_DATA = <span class="string">'e95dca4b-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line"> LED_MATRIX_STATE  = <span class="string">'e95d7b77-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line"> LED_TEXT=<span class="string">'e95d93ee-251d-470a-a062-fa1922dfa9a8'</span>  <span class="comment">//新加的led_text特性相关语句</span></span><br><span class="line"> MODEL_NUMBER_STRING = <span class="string">'00002a24-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line"> <span class="comment">// cached characteristics var accelerometer_data; </span></span><br><span class="line"> <span class="keyword">var</span> led_matrix_state; </span><br><span class="line"> <span class="keyword">var</span> led_text;          <span class="comment">//新加的led_text特性相关语句</span></span><br><span class="line"> <span class="keyword">var</span> model_number_string;</span><br><span class="line"> <span class="keyword">var</span> accelerometer_data;</span><br><span class="line"><span class="keyword">var</span> options = &#123;<span class="attr">acceptAllDevices</span>:<span class="literal">true</span>,</span><br><span class="line">               optionalServices: [DEVICE_INFORMATION_SERVICE, ACCELEROMETER_SERVICE, LED_SERVICE]  <span class="comment">//在第5节课上添加</span></span><br><span class="line">           &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">discoverSvcsAndChars</span>(<span class="params"></span>)    //在第5课基础上添加的函数</span></span><br><span class="line"><span class="function">       </span>&#123;  </span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">"discoverSvcsAndChars server="</span> + connected_server); </span><br><span class="line">           connected_server.getPrimaryServices()</span><br><span class="line">           .then(<span class="function"><span class="params">services</span> =&gt;</span> </span><br><span class="line">           &#123;    </span><br><span class="line">                   has_accelerometer_service = <span class="literal">false</span>;    </span><br><span class="line">                   has_led_service = <span class="literal">false</span>;    </span><br><span class="line">                   has_device_information_service = <span class="literal">false</span>; </span><br><span class="line"></span><br><span class="line">                   services_discovered = <span class="number">0</span>;    </span><br><span class="line">                   service_count = services.length;    </span><br><span class="line">                   <span class="built_in">console</span>.log(<span class="string">"Got "</span> + service_count + <span class="string">" services"</span>); </span><br><span class="line">       </span><br><span class="line">                   services.forEach(<span class="function"><span class="params">service</span> =&gt;</span> </span><br><span class="line">                   &#123;     </span><br><span class="line">                       <span class="keyword">if</span> (service.uuid == ACCELEROMETER_SERVICE)</span><br><span class="line">                       &#123;      </span><br><span class="line">                           has_accelerometer_service = <span class="literal">true</span>;    </span><br><span class="line">                       &#125;   </span><br><span class="line">                       <span class="keyword">if</span> (service.uuid == LED_SERVICE) </span><br><span class="line">                       &#123;      </span><br><span class="line">                           has_led_service = <span class="literal">true</span>;     </span><br><span class="line">                       &#125;     </span><br><span class="line">                      <span class="keyword">if</span> (service.uuid == DEVICE_INFORMATION_SERVICE) </span><br><span class="line">                       &#123;      </span><br><span class="line">                           has_device_information_service = <span class="literal">true</span>;     </span><br><span class="line">                       &#125; </span><br><span class="line">                       <span class="keyword">if</span> (service.uuid == TEMPERATURE_SERVICE) <span class="comment">//温度</span></span><br><span class="line">                       &#123;      </span><br><span class="line">                           has_temperature_service = <span class="literal">true</span>;     </span><br><span class="line">                       &#125;        </span><br><span class="line">                       <span class="built_in">console</span>.log(<span class="string">'Getting Characteristics for service '</span> + service.uuid);     </span><br><span class="line">                       service.getCharacteristics()</span><br><span class="line">                       .then(<span class="function"><span class="params">characteristics</span> =&gt;</span> </span><br><span class="line">                       &#123;      </span><br><span class="line">                           <span class="built_in">console</span>.log(<span class="string">'&gt; Service: '</span> + service.uuid);      </span><br><span class="line">                           services_discovered++;     </span><br><span class="line">                           characteristics_discovered = <span class="number">0</span>;      </span><br><span class="line">                           characteristic_count = characteristics.length;      </span><br><span class="line">                           characteristics.forEach(<span class="function"><span class="params">characteristic</span> =&gt;</span> </span><br><span class="line">                           &#123;       </span><br><span class="line">                               characteristics_discovered++;       </span><br><span class="line">                               <span class="built_in">console</span>.log(<span class="string">'&gt;&gt; Characteristic: '</span> + characteristic.uuid);       </span><br><span class="line">                               <span class="keyword">if</span> (characteristic.uuid == ACCELEROMETER_DATA)</span><br><span class="line">                               &#123;        </span><br><span class="line">                                   accelerometer_data = characteristic;        </span><br><span class="line">                                   has_accelerometer_data = <span class="literal">true</span>;       </span><br><span class="line">                               &#125;      </span><br><span class="line">                               <span class="keyword">if</span> (characteristic.uuid == LED_MATRIX_STATE) </span><br><span class="line">                               &#123;        </span><br><span class="line">                                   led_matrix_state = characteristic;        </span><br><span class="line">                                   has_led_matrix_state = <span class="literal">true</span>;       </span><br><span class="line">                               &#125; </span><br><span class="line">                               <span class="keyword">if</span> (characteristic.uuid == LED_TEXT)    <span class="comment">//新加的led_text特性相关语句</span></span><br><span class="line">                               &#123;        </span><br><span class="line">                                   led_text = characteristic;        </span><br><span class="line">                                   has_led_text = <span class="literal">true</span>;       </span><br><span class="line">                               &#125;       </span><br><span class="line">                               <span class="keyword">if</span> (characteristic.uuid == MODEL_NUMBER_STRING) </span><br><span class="line">                               &#123;        </span><br><span class="line">                                   model_number_string = characteristic;        </span><br><span class="line">                                   has_model_name_string = <span class="literal">true</span>;       </span><br><span class="line">                               &#125;</span><br><span class="line">                               <span class="keyword">if</span> (services_discovered == service_count &amp;&amp; characteristics_discovered == characteristic_count) </span><br><span class="line">                               &#123;        </span><br><span class="line">                                   <span class="built_in">console</span>.log(<span class="string">"FINISHED DISCOVERY"</span>); </span><br><span class="line">                                   setDiscoveryStatus(<span class="literal">true</span>);       </span><br><span class="line">                                   <span class="comment">//setDiscoveryStatus(true);                  </span></span><br><span class="line">                               &#125;    </span><br><span class="line">                           &#125;);     </span><br><span class="line">                       &#125;);    </span><br><span class="line">                   &#125;);  </span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDiscoveryStatus</span>(<span class="params">status</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    services_discovered=status;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'status_discovered'</span>).innerHTML=status;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;table border=<span class="string">"1"</span>&gt;</span><br><span class="line">               &lt;tr&gt;</span><br><span class="line">                   &lt;td&gt;     <span class="xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span>Connected<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span>   &lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                   &lt;td&gt;     &lt;b&gt;Service Discovery Completed&lt;/</span>b&gt;   &lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">               &lt;/</span>tr&gt;</span><br><span class="line">               &lt;tr&gt;</span><br><span class="line">                   &lt;td id=<span class="string">"status_connected"</span>&gt; <span class="literal">false</span> &lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                   &lt;td id="status_discovered"&gt; false &lt;/</span>td&gt;</span><br><span class="line">               &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">           &lt;/</span>table&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2805825880,2963780096&fm=26&gp=0.jpg" alt="点击查看源网页"></p>
<h2 id="憨憨：温度服务"><a href="#憨憨：温度服务" class="headerlink" title="憨憨：温度服务"></a>憨憨：温度服务</h2><p>具体流程和led服务一样，不过关键是要确定板子里有温度服务，如果没有可以去编辑<a href="https://makecode.microbit.org/#editor" target="_blank" rel="noopener">网站上加</a>。代码放在上面一起了</p>
<p><img src="https://raw.githubusercontent.com/CCIT18081430121/img/master/20200619194020.jpg" alt="img"></p>
<p><strong>看不懂就算了，别勉强，反正写给我自己看的，不懂去这个网站：</strong><a href="https://micropython.nxez.com/microbit-tutorial/Micro_bit_Board/" target="_blank" rel="noopener">https://micropython.nxez.com/microbit-tutorial/Micro_bit_Board/</a></p>
]]></content>
  </entry>
  <entry>
    <title>设备连接</title>
    <url>/2020/06/17/%E8%AE%BE%E5%A4%87%E8%BF%9E%E6%8E%A5/</url>
    <content><![CDATA[<p>​                                                                        <strong>网页连接蓝牙设备</strong></p>
<p>首先我们用到了<strong>Micro：bit</strong>设备来进行学习</p>
<p><img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1592412079063&di=9a5fe519d645ada0507245e0abba6941&imgtype=0&src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fportal%2F201507%2F13%2F155749m1u5a536z3sff11s.png" alt="点击查看源网页"></p>
<p><strong>Micro：bit</strong>板支持包括Javasript、Python、Mbed C在内的多种主流的编程语言</p>
<p>创建html文件，输如下代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            <span class="keyword">var</span> selected_device;           <span class="comment">// 保存用户选择的蓝牙设备</span></span><br><span class="line">            <span class="keyword">var</span> connected_server;           <span class="comment">//在第二课基础上添加的变量，保存用户连接的蓝牙设备</span></span><br><span class="line">            <span class="keyword">var</span> connected=<span class="literal">false</span>;            <span class="comment">//在第三课基础上添加的变量，保存电脑蓝牙的当前连接设备</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">discoverDevices</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"discoverDevices"</span>);     <span class="comment">//consol.log 控制台打印输出</span></span><br><span class="line">                <span class="keyword">var</span> options = &#123;<span class="attr">acceptAllDevices</span>:<span class="literal">true</span>&#125;        <span class="comment">//发现所有周边蓝牙设备</span></span><br><span class="line">                navigator.bluetooth.requestDevice(options)      <span class="comment">//Navigator对象，包含有关游览器的信息</span></span><br><span class="line">                .then(<span class="function"><span class="params">device</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'&gt; Name:        '</span> + device.name);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'&gt; Id:          '</span> + device.id);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'&gt; Connected:   '</span> + device.gatt.connected);</span><br><span class="line">                    selected_device = device;</span><br><span class="line">                    <span class="built_in">console</span>.log(selected_device);</span><br><span class="line">                    connect();  </span><br><span class="line">                &#125;)</span><br><span class="line">                .catch(<span class="function"><span class="params">error</span> =&gt;</span>&#123;</span><br><span class="line">                    alert(<span class="string">'ERROR:'</span> +error);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'ERROR:'</span> +error);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"connecting"</span>);</span><br><span class="line">                selected_device.gatt.connect()</span><br><span class="line">                .then(</span><br><span class="line">                    <span class="function"><span class="keyword">function</span>(<span class="params">server</span>)                            //表示连接成功</span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"Connected to"</span> + server.device.id);</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"Connected="</span> + server.connected);</span><br><span class="line">                        connected_server = server;</span><br><span class="line">                        setConnectedStatus(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="function"><span class="keyword">function</span>(<span class="params">error</span>)                              //表示连接失败</span></span><br><span class="line"><span class="function">                    </span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"ERROR:could not connct-"</span> + error);</span><br><span class="line">                        alert(<span class="string">"ERROR:could not connct-"</span> + error);</span><br><span class="line">                        setConnectedStatus(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">setConnectedStatus</span>(<span class="params">status</span>)</span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                connected=status;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'status_connected'</span>).innerHTML=status;</span><br><span class="line">                <span class="keyword">if</span>(status==<span class="literal">true</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">'btn_scan'</span>).innerHTML=<span class="string">"Disconnect"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">'btn_scan'</span>).innerHTML=<span class="string">"Discover Devices"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>head&gt;</span><br><span class="line">    &lt;body&gt;       </span><br><span class="line">        &lt;h2&gt;</span><br><span class="line">            Status  &lt;!-- 显示蓝牙状态--&gt;</span><br><span class="line">        &lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">        &lt;table border="1"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;tr&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;    &lt;b&gt;Connected&lt;/</span>b&gt;    &lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td id=<span class="string">"status_connected"</span>&gt;False&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">        &lt;<span class="regexp">/table&gt; </span></span><br><span class="line"><span class="regexp">        &lt;h2&gt;Device Discovery &lt;/</span>h2&gt;     &lt;!-- 扫描/发现蓝牙设备 --&gt;</span><br><span class="line">        &lt;button id=<span class="string">"btn_scan"</span> onclick=<span class="string">"discoverDevices()"</span>&gt;</span><br><span class="line">            Start scan</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>在没有错误的情况写，在浏览器中打开网页</p>
<p>单点Start scan键开始扫描</p>
<p>在弹出框中选择自己的板子，单点配对</p>
<p>当网页显示ture 则连接成功</p>
<p><img src="https://raw.githubusercontent.com/CCIT18081430121/img/master/20200617221232.jpg" alt="点击查看源网页"></p>
<p><strong>如有疑问或想进一步学习可访问：</strong><a href="https://micropython.nxez.com/microbit-tutorial/Micro_bit_Board/" target="_blank" rel="noopener">https://micropython.nxez.com/microbit-tutorial/Micro_bit_Board/</a></p>
]]></content>
  </entry>
  <entry>
    <title>github</title>
    <url>/2020/05/17/github/</url>
    <content><![CDATA[<p>github</p>
<p>账号 <a href="mailto:2944098540@qq.com">2944098540@qq.com</a></p>
<p>新建仓库时 GitHub page 要选择 master 分支</p>
<p>![timg](C:\Users\nsus\Desktop\hexo img\timg.jpg)</p>
]]></content>
  </entry>
  <entry>
    <title>图片的插入和评论</title>
    <url>/2020/03/27/%E5%9B%BE%E7%89%87%E7%9A%84%E6%8F%92%E5%85%A5%E5%92%8C%E8%AF%84%E8%AE%BA/</url>
    <content><![CDATA[<p>图片的插入</p>
<p><a href="http://image.baidu.com/search/detail?ct=503316480&z=undefined&tn=baiduimagedetail&ipn=d&word=海贼王&step_word=&ie=utf-8&in=&cl=2&lm=-1&st=undefined&hd=undefined&latest=undefined&copyright=undefined&cs=2129255272,1886334624&os=2619448526,4294612036&simid=0,0&pn=50&rn=1&di=144680&ln=1952&fr=&fmq=1585287985390_R&fm=&ic=undefined&s=undefined&se=&sme=&tab=0&width=undefined&height=undefined&face=undefined&is=0,0&istype=0&ist=&jit=&bdtype=11&spn=0&pi=0&gsm=0&objurl=http%3A%2F%2Fimg.qikula.com%2Ffile%2Fimage%2Fpic%2F5a2738672165n3685535332c27.jpg&rpstart=0&rpnum=0&adpicid=0&force=undefined" target="_blank" rel="noopener"><img src="http://img4.imgtn.bdimg.com/it/u=2129255272,1886334624&fm=11&gp=0.jpg" alt="img"></a></p>
<p>Finish</p>
<p>评论</p>
<p>在友言官网注册账号，得到用户ID<br>将<strong>友言ID</strong>复制到NexT主题的配置文件<strong>_config</strong>中，搜索youyan，将<strong>youyan_uid</strong>前面的#号去掉，将id填写到<strong>youyan_uid：</strong>后面。</p>
<p>Finish </p>
]]></content>
  </entry>
  <entry>
    <title>附加功能  背景音乐</title>
    <url>/2020/03/27/%E9%99%84%E5%8A%A0%E5%8A%9F%E8%83%BD%20%20%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90/</url>
    <content><![CDATA[<p>附加功能  背景音乐</p>
<p> 进入网易云，找到自己喜欢的歌单，然后点击<strong>生成外链播放器</strong> </p>
<p><a href="http://music.163.com/m/playlist?id=2299097616&amp;userid=1630413757" target="_blank" rel="noopener">http://music.163.com/m/playlist?id=2299097616&amp;userid=1630413757</a></p>
]]></content>
  </entry>
  <entry>
    <title>本地</title>
    <url>/2020/03/27/%E6%9C%AC%E5%9C%B0/</url>
    <content><![CDATA[<hr>
<hr>
<p>本地预览</p>
<p><img src="D:%5Cpublic%5C4.png" alt="4"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo s</span><br><span class="line">hexo new&quot;my 233&#39;s&quot;</span><br></pre></td></tr></table></figure>

<p>Finish</p>
]]></content>
  </entry>
</search>
